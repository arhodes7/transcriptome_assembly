includeConfig "$baseDir/params.config"

process {
  queue = 'biocore-el7,long-sl7,short-sl7'
  memory='12G'
  container = 'biocorecrg/trinity_assembly:0.6'
  withLabel: big_cpus {
        cpus = 8
        memory = '60G'
  }
  withLabel: big_mem_cpus {
        cpus = 30
        memory = '100G'
        time = '600h'
  }
  withLabel: increase_mem {
       errorStrategy = 'retry'
       memory = {10.GB * task.attempt}
       cpus = 1
       time = {6h * task.attempt}
       maxRetries = { task.exitStatus == 140 ? 4 : 1 }
  }	
}

singularity.enabled = true
singularity.cacheDir = "$baseDir/../singularity"
